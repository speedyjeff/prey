## Predator v Prey
Predator (blue) versus prey (yellow) simulator.  This is inspired by [AI Battles](https://www.youtube.com/watch?v=qwrp3lB-jkQ).

![game2](https://github.com/speedyjeff/prey/blob/main/media/game2.gif)

The AI are driven by a neural networks that choose the direction and speed of movement.  In the initial configuration the predators (blue) hunt and attack the prey (yellow).  A series of experiments were run to guage the fitness of these networks (compared with a random movement AI).  The results show that the average lifetime of a predator is 40-70% longer than moving randomly.

### Basic Rules
The basic rules for the simulatio are that predators must eat prey to survive, and prey try to survive as long as they can.

![game3](https://github.com/speedyjeff/prey/blob/main/media/game3.gif)

Predators
 * Movement consume energy, standing still consumes energy
 * Must consume prey in order to gain energy and reproduce
 * Once energy is depleted, they will die
 * Touching a prey is lethal
 * Eating when not fully digested their previous meal will gain energy, but not contribute to their next reproduction
 * The field of vision is narrow and long

Prey 
 * Movement consumes energy, standing still replenishes energy
 * Reproductio happens as long as they stay alive long enough
 * Once energy is depleted, they cannot move
 * The field of vision is wide and short

Optional rules include allowing prey to fight back and kill predators, requiring N hits to deal a lethal hit, etc.

### Mechanics
The AI are governed by a set of meters that are adjusted for every update.  An update is designed to happen 10 times a second.  Predators and prey have specific costs/update for each of these meters.

 * Energy - needed to move/survive
 * Digestion - (predator) when still digesting, eating more prey does not lower the reproduction meter
 * Reproduction
   * (predator) adjusts when digesting prey
   * (prey) adjusted per update
 * Attack - a cool down between each attack

Each AI also has a Health meter, which is only adjusted if attacked by an AI of the opposite type.

The field of view is generated by extending rays out in front of the AI and returning the objects that are the closest.

![game1](https://github.com/speedyjeff/prey/blob/main/media/game1.gif)

Movement and speed are determined by two neural networks.  These neural networks are trained by actions that the AI take.  At first, the actions are largely random, but as the AI survives the actions are reinforced by actions that yield longer life.  New AI have a chance to inhert traits from their parents or the best surviving AI.


### Experiments
Experiments are run to track if neural network trained AI can have extended average lifetimes to random AI.  The termination conditions for the experiments are either of the populations are extinct, or a maximum lifetime is reached (maximum number of updates).

The minimum / maximum lifetimes: (without being killed)
 * Predator - 200 thru 1000 (even further if consuming prey)
 * Prey - maxium lifetime (per the basic rules, prey will stay still once energy is depleted)


#### Small experiment
The small experiments have a limit of ~1,000 AI.  This is a great experiment to visualize how the modes evolve and interact.

Configuration:
 * Width - 6,400
 * Height - 6,400
 * Predator (initial/max) - 50/170
 * Prey (initial/max) - 300/800
 * Combat - variable (peaceful or aggressive)
 * Random - variable
 * Iterations - 10
 * Max Lifetime - 5,000

```
./simulationcli -width 6400 -height 6400 -initialpred 50 -initialprey 300 -maxpred 170 -maxprey 800 -combat $0 -random $1 -it 10 -maxl 5000
```

##### Predator (peaceful) v Prey (peaceful)
This configuration is useful for a baseline, it will help determine local minimums for the predators as they require combat (eating) to survive.  The average lifetime of predator (neural) was 70% higher than predator (random).  The average lifetime for predators (neural) were 586-589 updates, where as predator (random) was 333-334 updates.

<details>
<summary>data</summary>
<b>Predator (neural) v Prey (neural)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>673</td><td>0</td><td>800</td><td>672</td><td>0</td><td>1</td><td>0</td><td>421</td><td>0</td></tr>
<tr><td>1</td><td>698</td><td>0</td><td>800</td><td>696</td><td>1</td><td>0</td><td>0</td><td>606</td><td>0</td></tr>
<tr><td>2</td><td>675</td><td>0</td><td>800</td><td>672</td><td>2</td><td>0</td><td>0</td><td>589</td><td>0</td></tr>
<tr><td>3</td><td>689</td><td>0</td><td>800</td><td>688</td><td>3</td><td>0</td><td>0</td><td>616</td><td>0</td></tr>
<tr><td>4</td><td>680</td><td>0</td><td>800</td><td>680</td><td>4</td><td>0</td><td>0</td><td>560</td><td>0</td></tr>
<tr><td>5</td><td>710</td><td>0</td><td>800</td><td>708</td><td>5</td><td>0</td><td>0</td><td>618</td><td>0</td></tr>
<tr><td>6</td><td>671</td><td>0</td><td>800</td><td>669</td><td>6</td><td>0</td><td>0</td><td>626</td><td>0</td></tr>
<tr><td>7</td><td>712</td><td>0</td><td>800</td><td>710</td><td>7</td><td>0</td><td>0</td><td>609</td><td>0</td></tr>
<tr><td>8</td><td>676</td><td>0</td><td>800</td><td>676</td><td>8</td><td>1</td><td>0</td><td>611</td><td>0</td></tr>
<tr><td>9</td><td>703</td><td>0</td><td>800</td><td>702</td><td>9</td><td>0</td><td>0</td><td>606</td><td>0</td></tr>
</table>
<b>Predator (random) v Prey (neural)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>359</td><td>0</td><td>800</td><td>359</td><td>0</td><td>0</td><td>0</td><td>334</td><td>0</td></tr>
<tr><td>1</td><td>362</td><td>0</td><td>800</td><td>360</td><td>1</td><td>0</td><td>0</td><td>338</td><td>0</td></tr>
<tr><td>2</td><td>355</td><td>0</td><td>800</td><td>352</td><td>2</td><td>1</td><td>0</td><td>334</td><td>0</td></tr>
<tr><td>3</td><td>365</td><td>0</td><td>800</td><td>364</td><td>3</td><td>1</td><td>0</td><td>335</td><td>0</td></tr>
<tr><td>4</td><td>364</td><td>0</td><td>800</td><td>364</td><td>4</td><td>1</td><td>1</td><td>334</td><td>0</td></tr>
<tr><td>5</td><td>354</td><td>0</td><td>800</td><td>353</td><td>5</td><td>0</td><td>0</td><td>331</td><td>0</td></tr>
<tr><td>6</td><td>370</td><td>0</td><td>800</td><td>370</td><td>0</td><td>0</td><td>0</td><td>335</td><td>0</td></tr>
<tr><td>7</td><td>355</td><td>0</td><td>800</td><td>355</td><td>1</td><td>1</td><td>0</td><td>332</td><td>0</td></tr>
<tr><td>8</td><td>360</td><td>0</td><td>800</td><td>359</td><td>2</td><td>0</td><td>0</td><td>335</td><td>0</td></tr>
<tr><td>9</td><td>365</td><td>0</td><td>800</td><td>363</td><td>3</td><td>0</td><td>0</td><td>335</td><td>0</td></tr>
</table>
<b>Predator (neural) v Prey (random)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>676</td><td>0</td><td>800</td><td>668</td><td>0</td><td>0</td><td>0</td><td>429</td><td>0</td></tr>
<tr><td>1</td><td>674</td><td>0</td><td>800</td><td>674</td><td>1</td><td>0</td><td>0</td><td>614</td><td>0</td></tr>
<tr><td>2</td><td>701</td><td>0</td><td>800</td><td>690</td><td>2</td><td>0</td><td>0</td><td>620</td><td>0</td></tr>
<tr><td>3</td><td>699</td><td>0</td><td>800</td><td>692</td><td>3</td><td>0</td><td>0</td><td>613</td><td>0</td></tr>
<tr><td>4</td><td>700</td><td>0</td><td>800</td><td>684</td><td>4</td><td>0</td><td>0</td><td>611</td><td>0</td></tr>
<tr><td>5</td><td>700</td><td>0</td><td>800</td><td>694</td><td>5</td><td>0</td><td>0</td><td>609</td><td>0</td></tr>
<tr><td>6</td><td>689</td><td>0</td><td>800</td><td>672</td><td>6</td><td>0</td><td>0</td><td>604</td><td>0</td></tr>
<tr><td>7</td><td>687</td><td>0</td><td>800</td><td>686</td><td>7</td><td>0</td><td>0</td><td>601</td><td>0</td></tr>
<tr><td>8</td><td>691</td><td>0</td><td>800</td><td>688</td><td>8</td><td>0</td><td>0</td><td>588</td><td>0</td></tr>
<tr><td>9</td><td>706</td><td>0</td><td>800</td><td>696</td><td>9</td><td>1</td><td>0</td><td>604</td><td></td></tr>
</table>
<b>Predator (random) v Prey (random)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>359</td><td>0</td><td>801</td><td>352</td><td>0</td><td>0</td><td>0</td><td>330</td><td>0</td></tr>
<tr><td>1</td><td>387</td><td>0</td><td>800</td><td>372</td><td>1</td><td>1</td><td>0</td><td>334</td><td>0</td></tr>
<tr><td>2</td><td>367</td><td>0</td><td>800</td><td>359</td><td>2</td><td>0</td><td>0</td><td>335</td><td>0</td></tr>
<tr><td>3</td><td>361</td><td>0</td><td>800</td><td>352</td><td>3</td><td>0</td><td>0</td><td>334</td><td>0</td></tr>
<tr><td>4</td><td>368</td><td>0</td><td>800</td><td>354</td><td>4</td><td>0</td><td>0</td><td>336</td><td>0</td></tr>
<tr><td>5</td><td>371</td><td>0</td><td>800</td><td>363</td><td>5</td><td>1</td><td>0</td><td>333</td><td>0</td></tr>
<tr><td>6</td><td>363</td><td>0</td><td>800</td><td>357</td><td>6</td><td>0</td><td>0</td><td>333</td><td>0</td></tr>
<tr><td>7</td><td>381</td><td>0</td><td>800</td><td>372</td><td>0</td><td>0</td><td>0</td><td>335</td><td>0</td></tr>
<tr><td>8</td><td>353</td><td>0</td><td>800</td><td>351</td><td>1</td><td>0</td><td>0</td><td>332</td><td>0</td></tr>
<tr><td>9</td><td>369</td><td>0</td><td>800</td><td>356</td><td>2</td><td>0</td><td>0</td><td>335</td><td>0</td></tr>
</table>
</details>

##### Predator (aggressive) v Prey (peaceful)
This is the default configuration, the predators hunt the prey. The predator lifetime saw a 40% increase when using the predator (neural) over predator (random).  The average lifetime of predator (neural) was 670-818 updates, where as predator (random) was 514-559 updates.  

<details>
<summary>data</summary>
<b>Predator (neural) v Prey (neural)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>5000</td><td>170</td><td>800</td><td>2490</td><td>5</td><td>3288</td><td>2</td><td>396</td><td>238</td></tr>
<tr><td>1</td><td>5000</td><td>170</td><td>800</td><td>1912</td><td>11</td><td>4495</td><td>3</td><td>651</td><td>560</td></tr>
<tr><td>2</td><td>4086</td><td>0</td><td>800</td><td>1674</td><td>12</td><td>3363</td><td>5</td><td>841</td><td>610</td></tr>
<tr><td>3</td><td>4221</td><td>0</td><td>800</td><td>1689</td><td>14</td><td>3335</td><td>7</td><td>855</td><td>519</td></tr>
<tr><td>4</td><td>4597</td><td>0</td><td>800</td><td>1681</td><td>17</td><td>3956</td><td>8</td><td>842</td><td>826</td></tr>
<tr><td>5</td><td>5000</td><td>170</td><td>799</td><td>1788</td><td>18</td><td>3899</td><td>9</td><td>469</td><td>302</td></tr>
<tr><td>6</td><td>5000</td><td>166</td><td>800</td><td>2004</td><td>25</td><td>4306</td><td>11</td><td>486</td><td>383</td></tr>
<tr><td>7</td><td>3905</td><td>0</td><td>800</td><td>1414</td><td>26</td><td>3705</td><td>13</td><td>774</td><td>431</td></tr>
<tr><td>8</td><td>4235</td><td>0</td><td>800</td><td>1614</td><td>27</td><td>3211</td><td>14</td><td>860</td><td>585</td></tr>
<tr><td>9</td><td>5000</td><td>166</td><td>801</td><td>1551</td><td>8</td><td>4068</td><td>15</td><td>535</td><td>339</td></tr>
</table>
<b>Predator (random) v Prey (neural)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>5000</td><td>170</td><td>797</td><td>2020</td><td>5</td><td>2542</td><td>9</td><td>545</td><td>251</td></tr>
<tr><td>1</td><td>5001</td><td>157</td><td>800</td><td>2302</td><td>10</td><td>2648</td><td>12</td><td>518</td><td>243</td></tr>
<tr><td>2</td><td>5001</td><td>169</td><td>790</td><td>2038</td><td>14</td><td>3212</td><td>6</td><td>512</td><td>247</td></tr>
<tr><td>3</td><td>5000</td><td>166</td><td>799</td><td>2305</td><td>23</td><td>3939</td><td>9</td><td>511</td><td>270</td></tr>
<tr><td>4</td><td>5000</td><td>169</td><td>800</td><td>2013</td><td>32</td><td>3409</td><td>11</td><td>512</td><td>259</td></tr>
<tr><td>5</td><td>5000</td><td>170</td><td>794</td><td>1608</td><td>39</td><td>3469</td><td>19</td><td>516</td><td>269</td></tr>
<tr><td>6</td><td>5000</td><td>170</td><td>797</td><td>1638</td><td>47</td><td>3365</td><td>23</td><td>494</td><td>283</td></tr>
<tr><td>7</td><td>5000</td><td>169</td><td>800</td><td>1904</td><td>54</td><td>3145</td><td>25</td><td>545</td><td>260</td></tr>
<tr><td>8</td><td>5001</td><td>168</td><td>799</td><td>1786</td><td>64</td><td>2932</td><td>26</td><td>492</td><td>285</td></tr>
<tr><td>9</td><td>5000</td><td>169</td><td>799</td><td>1762</td><td>72</td><td>3610</td><td>27</td><td>499</td><td>273</td></tr>
</table>
<b>Predator (neural) v Prey (random)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>5002</td><td>169</td><td>800</td><td>2278</td><td>1</td><td>4386</td><td>1</td><td>675</td><td>414</td></tr>
<tr><td>1</td><td>5000</td><td>170</td><td>800</td><td>1688</td><td>4</td><td>3116</td><td>7</td><td>630</td><td>321</td></tr>
<tr><td>2</td><td>5000</td><td>170</td><td>800</td><td>2314</td><td>8</td><td>3541</td><td>11</td><td>726</td><td>353</td></tr>
<tr><td>3</td><td>5003</td><td>170</td><td>800</td><td>2645</td><td>9</td><td>4481</td><td>1</td><td>943</td><td>542</td></tr>
<tr><td>4</td><td>5004</td><td>170</td><td>801</td><td>2337</td><td>13</td><td>4445</td><td>0</td><td>769</td><td>436</td></tr>
<tr><td>5</td><td>5001</td><td>169</td><td>799</td><td>2788</td><td>18</td><td>4267</td><td>4</td><td>919</td><td>519</td></tr>
<tr><td>6</td><td>5002</td><td>170</td><td>800</td><td>3136</td><td>19</td><td>4011</td><td>6</td><td>904</td><td>528</td></tr>
<tr><td>7</td><td>5005</td><td>167</td><td>800</td><td>3101</td><td>21</td><td>4517</td><td>10</td><td>922</td><td>522</td></tr>
<tr><td>8</td><td>5008</td><td>168</td><td>800</td><td>2834</td><td>23</td><td>4394</td><td>15</td><td>958</td><td>526</td></tr>
<tr><td>9</td><td>5002</td><td>168</td><td>799</td><td>2625</td><td>26</td><td>4093</td><td>18</td><td>740</td><td>336</td></tr>
</table>
<b>Predator (random) v Prey (random)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>5007</td><td>169</td><td>800</td><td>2371</td><td>3</td><td>2679</td><td>6</td><td>546</td><td>270</td></tr>
<tr><td>1</td><td>5005</td><td>170</td><td>797</td><td>2218</td><td>10</td><td>3076</td><td>9</td><td>534</td><td>273</td></tr>
<tr><td>2</td><td>5001</td><td>169</td><td>800</td><td>2279</td><td>11</td><td>3016</td><td>5</td><td>545</td><td>269</td></tr>
<tr><td>3</td><td>5001</td><td>170</td><td>800</td><td>2168</td><td>18</td><td>2712</td><td>7</td><td>562</td><td>263</td></tr>
<tr><td>4</td><td>5002</td><td>169</td><td>797</td><td>1927</td><td>23</td><td>3127</td><td>13</td><td>577</td><td>259</td></tr>
<tr><td>5</td><td>5000</td><td>170</td><td>800</td><td>1765</td><td>26</td><td>3090</td><td>20</td><td>557</td><td>272</td></tr>
<tr><td>6</td><td>5004</td><td>170</td><td>801</td><td>1996</td><td>27</td><td>2644</td><td>24</td><td>579</td><td>265</td></tr>
<tr><td>7</td><td>5002</td><td>169</td><td>797</td><td>2214</td><td>28</td><td>2904</td><td>0</td><td>549</td><td>274</td></tr>
<tr><td>8</td><td>5006</td><td>167</td><td>798</td><td>2096</td><td>31</td><td>2574</td><td>5</td><td>566</td><td>264</td></tr>
<tr><td>9</td><td>5000</td><td>170</td><td>799</td><td>2074</td><td>7</td><td>3229</td><td>8</td><td>583</td><td>256</td></tr>
</table>
</details>

##### Predator (peaceful) v Prey (aggressive)
This configuration has a double negative for predators, they are not able to reproduce (as they cannot eat) and prey are agressive.  There was a significant drop (2x) in average lifetimes for predators compared with the baseline.

<details>
<summary>data</summary>
<b>Predator (neural) v Prey (neural)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>486</td><td>0</td><td>800</td><td>486</td><td>0</td><td>1</td><td>0</td><td>211</td><td>0</td></tr>
<tr><td>1</td><td>461</td><td>0</td><td>800</td><td>461</td><td>1</td><td>0</td><td>0</td><td>138</td><td>0</td></tr>
<tr><td>2</td><td>649</td><td>0</td><td>800</td><td>648</td><td>2</td><td>0</td><td>0</td><td>209</td><td>0</td></tr>
<tr><td>3</td><td>676</td><td>0</td><td>800</td><td>676</td><td>3</td><td>0</td><td>0</td><td>235</td><td>0</td></tr>
<tr><td>4</td><td>512</td><td>0</td><td>800</td><td>512</td><td>4</td><td>1</td><td>0</td><td>192</td><td>0</td></tr>
<tr><td>5</td><td>698</td><td>0</td><td>800</td><td>698</td><td>5</td><td>0</td><td>0</td><td>317</td><td>0</td></tr>
<tr><td>6</td><td>642</td><td>0</td><td>800</td><td>642</td><td>6</td><td>0</td><td>0</td><td>199</td><td>0</td></tr>
<tr><td>7</td><td>652</td><td>0</td><td>800</td><td>652</td><td>7</td><td>0</td><td>0</td><td>182</td><td>0</td></tr>
<tr><td>8</td><td>439</td><td>0</td><td>800</td><td>438</td><td>8</td><td>0</td><td>0</td><td>146</td><td>0</td></tr>
<tr><td>9</td><td>666</td><td>0</td><td>800</td><td>666</td><td>9</td><td>0</td><td>0</td><td>193</td><td>0</td></tr>
</table>
<b>Predator (random) v Prey (neural)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>347</td><td>0</td><td>800</td><td>346</td><td>0</td><td>0</td><td>0</td><td>171</td><td>0</td></tr>
<tr><td>1</td><td>351</td><td>0</td><td>800</td><td>350</td><td>1</td><td>1</td><td>0</td><td>184</td><td>0</td></tr>
<tr><td>2</td><td>358</td><td>0</td><td>800</td><td>358</td><td>2</td><td>0</td><td>0</td><td>231</td><td>0</td></tr>
<tr><td>3</td><td>342</td><td>0</td><td>801</td><td>342</td><td>3</td><td>0</td><td>0</td><td>182</td><td>0</td></tr>
<tr><td>4</td><td>362</td><td>0</td><td>800</td><td>361</td><td>4</td><td>0</td><td>0</td><td>186</td><td>0</td></tr>
<tr><td>5</td><td>347</td><td>0</td><td>800</td><td>347</td><td>5</td><td>0</td><td>0</td><td>180</td><td>0</td></tr>
<tr><td>6</td><td>347</td><td>0</td><td>800</td><td>346</td><td>6</td><td>0</td><td>0</td><td>177</td><td>0</td></tr>
<tr><td>7</td><td>342</td><td>0</td><td>800</td><td>342</td><td>7</td><td>0</td><td>0</td><td>155</td><td>0</td></tr>
<tr><td>8</td><td>340</td><td>0</td><td>800</td><td>340</td><td>8</td><td>0</td><td>0</td><td>189</td><td>0</td></tr>
<tr><td>9</td><td>336</td><td>0</td><td>800</td><td>335</td><td>9</td><td>0</td><td>0</td><td>166</td><td>0</td></tr>
</table>
<b>Predator (neural) v Prey (random)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>380</td><td>0</td><td>800</td><td>376</td><td>0</td><td>0</td><td>0</td><td>161</td><td>0</td></tr>
<tr><td>1</td><td>310</td><td>0</td><td>801</td><td>308</td><td>1</td><td>1</td><td>2</td><td>143</td><td>0</td></tr>
<tr><td>2</td><td>612</td><td>0</td><td>800</td><td>604</td><td>2</td><td>0</td><td>0</td><td>177</td><td>0</td></tr>
<tr><td>3</td><td>413</td><td>0</td><td>800</td><td>406</td><td>3</td><td>1</td><td>2</td><td>144</td><td>0</td></tr>
<tr><td>4</td><td>521</td><td>0</td><td>800</td><td>519</td><td>4</td><td>1</td><td>3</td><td>174</td><td>0</td></tr>
<tr><td>5</td><td>395</td><td>0</td><td>800</td><td>394</td><td>5</td><td>0</td><td>0</td><td>170</td><td>0</td></tr>
<tr><td>6</td><td>692</td><td>0</td><td>800</td><td>691</td><td>6</td><td>2</td><td>2</td><td>172</td><td>0</td></tr>
<tr><td>7</td><td>607</td><td>0</td><td>800</td><td>602</td><td>0</td><td>1</td><td>3</td><td>165</td><td>0</td></tr>
<tr><td>8</td><td>523</td><td>0</td><td>800</td><td>514</td><td>1</td><td>0</td><td>0</td><td>182</td><td>0</td></tr>
<tr><td>9</td><td>540</td><td>0</td><td>800</td><td>539</td><td>2</td><td>0</td><td>0</td><td>151</td><td>0</td></tr>
</table>
<b>Predator (random) v Prey (random)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>341</td><td>0</td><td>800</td><td>337</td><td>0</td><td>1</td><td>2</td><td>150</td><td>0</td></tr>
<tr><td>1</td><td>349</td><td>0</td><td>800</td><td>344</td><td>1</td><td>0</td><td>0</td><td>183</td><td>0</td></tr>
<tr><td>2</td><td>353</td><td>0</td><td>800</td><td>348</td><td>2</td><td>0</td><td>0</td><td>181</td><td>0</td></tr>
<tr><td>3</td><td>327</td><td>0</td><td>800</td><td>322</td><td>3</td><td>0</td><td>0</td><td>172</td><td>0</td></tr>
<tr><td>4</td><td>352</td><td>0</td><td>800</td><td>345</td><td>4</td><td>0</td><td>0</td><td>162</td><td>0</td></tr>
<tr><td>5</td><td>322</td><td>0</td><td>800</td><td>320</td><td>5</td><td>0</td><td>0</td><td>144</td><td>0</td></tr>
<tr><td>6</td><td>349</td><td>0</td><td>800</td><td>339</td><td>6</td><td>1</td><td>0</td><td>176</td><td>0</td></tr>
<tr><td>7</td><td>354</td><td>0</td><td>800</td><td>349</td><td>7</td><td>0</td><td>0</td><td>185</td><td>0</td></tr>
<tr><td>8</td><td>336</td><td>0</td><td>800</td><td>331</td><td>8</td><td>0</td><td>0</td><td>165</td><td>0</td></tr>
<tr><td>9</td><td>335</td><td>0</td><td>800</td><td>331</td><td>9</td><td>0</td><td>0</td><td>177</td><td>0</td></tr>
</table>
</details>

##### Predator (aggresive) v Prey (aggressive)
This is the purge mode, everyone is attacking everyone.  The prey seem to have the advantage as they have the numbers and significantly reduce (5x) the length of the game, espeically once the prey (neural) model is trained.

<details>
<summary>data</summary>
<b>Predator (neural) v Prey (neural)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>4543</td><td>0</td><td>800</td><td>809</td><td>2</td><td>4199</td><td>0</td><td>298</td><td>1618</td></tr>
<tr><td>1</td><td>5001</td><td>10</td><td>800</td><td>1055</td><td>16</td><td>4037</td><td>1</td><td>315</td><td>445</td></tr>
<tr><td>2</td><td>3621</td><td>0</td><td>800</td><td>1289</td><td>17</td><td>2737</td><td>1</td><td>336</td><td>416</td></tr>
<tr><td>3</td><td>913</td><td>0</td><td>800</td><td>486</td><td>18</td><td>865</td><td>2</td><td>172</td><td>169</td></tr>
<tr><td>4</td><td>649</td><td>0</td><td>800</td><td>648</td><td>0</td><td>331</td><td>3</td><td>193</td><td>105</td></tr>
<tr><td>5</td><td>717</td><td>0</td><td>800</td><td>716</td><td>1</td><td>517</td><td>4</td><td>260</td><td>102</td></tr>
<tr><td>6</td><td>726</td><td>0</td><td>800</td><td>726</td><td>2</td><td>408</td><td>5</td><td>240</td><td>88</td></tr>
<tr><td>7</td><td>729</td><td>0</td><td>800</td><td>729</td><td>3</td><td>345</td><td>7</td><td>254</td><td>81</td></tr>
<tr><td>8</td><td>770</td><td>0</td><td>800</td><td>770</td><td>0</td><td>326</td><td>8</td><td>248</td><td>98</td></tr>
<tr><td>9</td><td>702</td><td>0</td><td>800</td><td>702</td><td>1</td><td>470</td><td>10</td><td>227</td><td>104</td></tr>
</table>
<b>Predator (random) v Prey (neural)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>4448</td><td>0</td><td>800</td><td>560</td><td>11</td><td>4127</td><td>0</td><td>284</td><td>1102</td></tr>
<tr><td>1</td><td>5000</td><td>48</td><td>800</td><td>912</td><td>32</td><td>3960</td><td>3</td><td>344</td><td>615</td></tr>
<tr><td>2</td><td>5000</td><td>14</td><td>800</td><td>794</td><td>38</td><td>3801</td><td>6</td><td>324</td><td>562</td></tr>
<tr><td>3</td><td>5000</td><td>17</td><td>800</td><td>822</td><td>56</td><td>4656</td><td>8</td><td>348</td><td>816</td></tr>
<tr><td>4</td><td>5000</td><td>100</td><td>800</td><td>800</td><td>60</td><td>4757</td><td>1</td><td>322</td><td>665</td></tr>
<tr><td>5</td><td>847</td><td>0</td><td>800</td><td>510</td><td>61</td><td>694</td><td>3</td><td>204</td><td>202</td></tr>
<tr><td>6</td><td>1772</td><td>0</td><td>800</td><td>422</td><td>65</td><td>1428</td><td>4</td><td>197</td><td>202</td></tr>
<tr><td>7</td><td>519</td><td>0</td><td>800</td><td>436</td><td>66</td><td>482</td><td>0</td><td>198</td><td>118</td></tr>
<tr><td>8</td><td>681</td><td>0</td><td>800</td><td>427</td><td>67</td><td>594</td><td>1</td><td>209</td><td>90</td></tr>
<tr><td>9</td><td>829</td><td>0</td><td>800</td><td>416</td><td>0</td><td>722</td><td>3</td><td>176</td><td>232</td></tr>
</table>
<b>Predator (neural) v Prey (random)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>5000</td><td>29</td><td>800</td><td>549</td><td>4</td><td>4977</td><td>0</td><td>203</td><td>1577</td></tr>
<tr><td>1</td><td>720</td><td>0</td><td>800</td><td>480</td><td>5</td><td>669</td><td>1</td><td>193</td><td>188</td></tr>
<tr><td>2</td><td>713</td><td>0</td><td>801</td><td>475</td><td>6</td><td>596</td><td>2</td><td>205</td><td>183</td></tr>
<tr><td>3</td><td>847</td><td>0</td><td>801</td><td>430</td><td>7</td><td>653</td><td>4</td><td>200</td><td>149</td></tr>
<tr><td>4</td><td>730</td><td>0</td><td>800</td><td>438</td><td>8</td><td>572</td><td>6</td><td>231</td><td>162</td></tr>
<tr><td>5</td><td>661</td><td>0</td><td>800</td><td>448</td><td>9</td><td>470</td><td>7</td><td>221</td><td>137</td></tr>
<tr><td>6</td><td>538</td><td>0</td><td>800</td><td>468</td><td>0</td><td>435</td><td>8</td><td>195</td><td>135</td></tr>
<tr><td>7</td><td>780</td><td>0</td><td>800</td><td>465</td><td>2</td><td>704</td><td>0</td><td>235</td><td>183</td></tr>
<tr><td>8</td><td>1837</td><td>0</td><td>802</td><td>436</td><td>3</td><td>1816</td><td>1</td><td>211</td><td>495</td></tr>
<tr><td>9</td><td>866</td><td>0</td><td>800</td><td>406</td><td>4</td><td>591</td><td>3</td><td>233</td><td>181</td></tr>
</table>
<b>Predator (random) v Prey (random)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>1019</td><td>0</td><td>800</td><td>457</td><td>1</td><td>869</td><td>1</td><td>216</td><td>155</td></tr>
<tr><td>1</td><td>2039</td><td>0</td><td>800</td><td>508</td><td>6</td><td>1895</td><td>2</td><td>222</td><td>395</td></tr>
<tr><td>2</td><td>875</td><td>0</td><td>800</td><td>472</td><td>7</td><td>697</td><td>4</td><td>231</td><td>184</td></tr>
<tr><td>3</td><td>1221</td><td>0</td><td>800</td><td>420</td><td>8</td><td>1114</td><td>5</td><td>214</td><td>252</td></tr>
<tr><td>4</td><td>1680</td><td>0</td><td>800</td><td>526</td><td>12</td><td>1463</td><td>0</td><td>233</td><td>219</td></tr>
<tr><td>5</td><td>930</td><td>0</td><td>800</td><td>401</td><td>0</td><td>870</td><td>0</td><td>221</td><td>166</td></tr>
<tr><td>6</td><td>635</td><td>0</td><td>800</td><td>432</td><td>1</td><td>598</td><td>1</td><td>228</td><td>147</td></tr>
<tr><td>7</td><td>1778</td><td>0</td><td>800</td><td>467</td><td>2</td><td>1558</td><td>3</td><td>220</td><td>363</td></tr>
<tr><td>8</td><td>526</td><td>0</td><td>800</td><td>471</td><td>4</td><td>394</td><td>5</td><td>224</td><td>136</td></tr>
<tr><td>9</td><td>1238</td><td>0</td><td>800</td><td>508</td><td>0</td><td>1046</td><td>6</td><td>245</td><td>233</td></tr>
</table>
</details>



#### Large experiment
The large experiments have a limit of ~16,000 AI, an increase of 16x over the small experiment.

Configuration:
 * Width - 16,000
 * Height - 16,000
 * Predator (initial/max) - 800/800
 * Prey (initial/max) - 4800/13000
 * Combat - variable (peaceful or aggressive)
 * Random - variable
 * Iterations - 5
 * Max Lifetime - 10,000

```
./simulationcli -width 16000 -height 16000 -initialpred 800 -initialprey 4800 -maxpred 800 -maxprey 13000 -combat $0 -random $1 -it 10 -maxl 10000 
```
##### Predator (aggressive) v Prey (peaceful)
This larger configuration provides more space, more predators, and more prey.  Predator lifetime saw a 75% increase when using the predator (neural) over predator (random).  The average lifetime of predator (neural) was 1183 updates, where as predator (random) was 674 updates. In addition, prey (neural) lifetime was 55% longer than prey (random).

<details>
<summary>data</summary>
<b>Predator (neural) v Prey (neural)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>10000</td><td>800</td><td>11922</td><td>8127</td><td>1</td><td>5746</td><td>0</td><td>854</td><td>323</td></tr>
<tr><td>1</td><td>10000</td><td>800</td><td>12997</td><td>9898</td><td>2</td><td>9345</td><td>2</td><td>1187</td><td>531</td></tr>
<tr><td>2</td><td>10000</td><td>800</td><td>12997</td><td>8956</td><td>3</td><td>9664</td><td>3</td><td>1188</td><td>479</td></tr>
<tr><td>3</td><td>10000</td><td>800</td><td>12998</td><td>8881</td><td>4</td><td>9939</td><td>4</td><td>1283</td><td>644</td></tr>
<tr><td>4</td><td>10000</td><td>800</td><td>13000</td><td>9705</td><td>5</td><td>9810</td><td>6</td><td>1405</td><td>612</td></tr>
</table>
<b>Predator (random) v Prey (random)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>10000</td><td>800</td><td>12999</td><td>6414</td><td>5</td><td>5428</td><td>11</td><td>719</td><td>327</td></tr>
<tr><td>1</td><td>10000</td><td>800</td><td>13000</td><td>3948</td><td>18</td><td>4688</td><td>21</td><td>667</td><td>341</td></tr>
<tr><td>2</td><td>10000</td><td>800</td><td>12997</td><td>5638</td><td>29</td><td>5740</td><td>32</td><td>656</td><td>335</td></tr>
<tr><td>3</td><td>10000</td><td>800</td><td>13000</td><td>3966</td><td>42</td><td>5280</td><td>37</td><td>652</td><td>328</td></tr>
<tr><td>4</td><td>10000</td><td>798</td><td>12991</td><td>4204</td><td>55</td><td>5053</td><td>45</td><td>680</td><td>333</td></tr>
</table>
</details>

##### Predator (aggresive) v Prey (aggressive)
This configuration continues to be a struggle for predators, as prey are aggressive and attack back.  Predator (neural) and predator (random) were within 8%, with random trending better.  Prey (neural) average lifetime was nearly 4x higher than prey (random).

<details>
<summary>data</summary>
<b>Predator (neural) v Prey (neural)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>8609</td><td>0</td><td>13000</td><td>712</td><td>0</td><td>7977</td><td>1</td><td>199</td><td>1327</td></tr>
<tr><td>1</td><td>428</td><td>0</td><td>13000</td><td>428</td><td>1</td><td>333</td><td>2</td><td>103</td><td>77</td></tr>
<tr><td>2</td><td>405</td><td>0</td><td>13000</td><td>388</td><td>2</td><td>372</td><td>0</td><td>100</td><td>77</td></tr>
<tr><td>3</td><td>10000</td><td>104</td><td>13000</td><td>786</td><td>3</td><td>9994</td><td>1</td><td>208</td><td>2408</td></tr>
<tr><td>4</td><td>733</td><td>0</td><td>13000</td><td>706</td><td>4</td><td>720</td><td>0</td><td>135</td><td>83</td></tr>
</table>
<b>Predator (random) v Prey (random)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>1084</td><td>0</td><td>13000</td><td>522</td><td>0</td><td>954</td><td>0</td><td>162</td><td>145</td></tr>
<tr><td>1</td><td>1335</td><td>0</td><td>13000</td><td>554</td><td>1</td><td>1320</td><td>1</td><td>161</td><td>172</td></tr>
<tr><td>2</td><td>4201</td><td>0</td><td>13000</td><td>470</td><td>3</td><td>4161</td><td>2</td><td>158</td><td>391</td></tr>
<tr><td>3</td><td>996</td><td>0</td><td>12999</td><td>592</td><td>4</td><td>945</td><td>3</td><td>162</td><td>153</td></tr>
<tr><td>4</td><td>869</td><td>0</td><td>13000</td><td>575</td><td>5</td><td>789</td><td>4</td><td>162</td><td>139</td></tr>
</table>
</details>


#### Long running
This experiment was to see if over the long term who wins: predators or prey.  When predator (neural) and prey (nerual) are active, it was a toss up with prey winning more often.  When predator (random) and prey (random) are active, the predators win.  If you visualize the difference between predator (neural) and predator (random), predator (random) holds even distribution across the board (eg. playing zone defense).  Whereas predator (neural) sweeps the prey away and follows the respan around the board.  The later approach can cause mass extinction if there are no predators in the zone where prey are spawning.

Configuration:
 * Width - 6,400
 * Height - 6,400
 * Predator (initial/max) - 50/170
 * Prey (initial/max) - 300/800
 * Combat - Predator
 * Random - variable
 * Iterations - 5
 * Max Lifetime - 100,000

```
simulationcli.exe -width 6400 -height 6400 -initialpred 50 -initialprey 300 -maxpred 170 -maxprey 800 -combat 1 -random 0 -it 5 -maxl 100000 
```

##### Predator (aggressive) v Prey (peaceful)
<details>
<summary>data</summary>
<b>Predator (neural) v Prey (neural)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>52413</td><td>167</td><td>0</td><td>2084</td><td>9</td><td>5415</td><td>41</td><td>466</td><td>321</td></tr>
<tr><td>1</td><td>40462</td><td>0</td><td>800</td><td>3771</td><td>53</td><td>16975</td><td>45</td><td>782</td><td>1062</td></tr>
<tr><td>2</td><td>3214</td><td>0</td><td>800</td><td>1484</td><td>55</td><td>2572</td><td>46</td><td>790</td><td>616</td></tr>
<tr><td>3</td><td>26737</td><td>156</td><td>0</td><td>2528</td><td>68</td><td>8711</td><td>47</td><td>486</td><td>461</td></tr>
<tr><td>4</td><td>5480</td><td>0</td><td>800</td><td>1609</td><td>73</td><td>4887</td><td>48</td><td>841</td><td>1169</td></tr>
</table>
<b>Predator (random) v Prey (random)</b>
<table>
<tr><th>Iteration</th><th>Lifetime</th><th>AlivePredators</th><th>AlivePrey</th><th>BestPredatorLifetime</th><th>BestPredatorGeneration</th><th>BestPreyLifetime</th><th>BestPreyGenertation</th><th>AvgPredatorLifetime</th><th>AvgPreyLifetime</th></tr>
<tr><td>0</td><td>52271</td><td>168</td><td>0</td><td>2134</td><td>158</td><td>4265</td><td>57</td><td>475</td><td>315</td></tr>
<tr><td>1</td><td>43907</td><td>163</td><td>0</td><td>2287</td><td>283</td><td>4086</td><td>69</td><td>480</td><td>317</td></tr>
<tr><td>2</td><td>26823</td><td>165</td><td>0</td><td>2236</td><td>304</td><td>3870</td><td>84</td><td>470</td><td>311</td></tr>
<tr><td>3</td><td>31292</td><td>169</td><td>0</td><td>1787</td><td>323</td><td>4139</td><td>148</td><td>473</td><td>322</td></tr>
<tr><td>4</td><td>21914</td><td>166</td><td>0</td><td>1961</td><td>364</td><td>4727</td><td>161</td><td>483</td><td>308</td></tr>
</table>
</details>


### Next steps
There is a lot more tuning possible in this experiment.  
A few areas of focus:
 * nerf prey attacks (as they currently are like a hord of unstoppable zobmies and overwhelm the predators)
 * further tuning of AI meters
 * allow for longer sight by predators
 * perform a tuning experiment to find the cross over points of where predators dominate, prey dominate, and a balance 

### Trying
This project is build able with Visual Studio 2022 or later.  Below are the steps to reproduce these experiments.

Visual representation (Windows only)
```
simulation.exe
```

Cross platform and on the command line.
```
./simulationcli.exe
```

This is all the available options for trying out the simulation from the command line.
```
./simulationcli.exe -help
./simulationcli
  -(help)             : this help
  -(w)idth            : the 2d width of the environment (default: 6400)
  -(hei)ght           : the 2d height of the enviorment (default: 6400)
  -(initialPred)ators : the initial number of predators at start (default: 50)
  -(maxPred)ators     : the max number of predators (default: 170)
  -(initialPrey)      : the initial number of prey at start (default: 300)
  -(maxPrey)          : the max numbre of prey (default: 800)
  -(c)ombat           : allowed combat (0: none, 1:Predators, 2:Prey, 3:Predators+Prey) (default: 1)
  -(r)andom           : random movement (0: none, 1:Predators, 2:Prey, 3:Predators+Prey) (default: 0)
  -(it)erations       : number of training runs (a run stops when either Predators or Prey are extinct) (default: 10)
  -(maxl)ifetime      : maximum number of updates per iteration (default: 5000
```

### Initialization
```
git submodule init
git submodule update
```
